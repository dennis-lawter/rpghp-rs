/*
    To test in httpyac w/ vscodium...
    open the command pallette (C-S-p)
    first run `> Test: Clear All Results`
    then run `> Test: Run All Tests`

    For a more granular approach...
    Hover each item individually and do C-M-r
*/

@assetsDir=./

###
# @name json_session
POST http://{{BASE_URL}}/api/v1/session

?? status == 201

###
# @ref json_session
GET http://{{BASE_URL}}/api/v1/session/{{json_session.session_id}}

?? status == 200

###
# @ref json_session
# @name json_init_group
POST http://{{BASE_URL}}/api/v1/session/{{json_session.session_id}}/init_group
Authorization: Bearer {{json_session.secret}}
Content-Type: application/json
< {{assetsDir}}init_group.json

?? status == 201

###
# @ref json_session
# @ref json_init_group
POST http://{{BASE_URL}}/api/v1/session/{{json_session.session_id}}/init_group/{{json_init_group.id}}/creature
Authorization: Bearer {{json_session.secret}}
Content-Type: application/json
< {{assetsDir}}jon_visible.json

?? status == 201

###
# @ref json_session
POST http://{{BASE_URL}}/api/v1/session/{{json_session.session_id}}/init_group/{{json_init_group.id}}/creature
Authorization: Bearer {{json_session.secret}}
Content-Type: application/json
< {{assetsDir}}jon_hidden.json

?? status == 201

###
# @ref json_session
GET http://{{BASE_URL}}/api/v1/session/{{json_session.session_id}}/creature

?? status == 200
?? body contains "jon visible"
?? body contains "jon hidden"

###
# @ref json_session
GET http://{{BASE_URL}}/api/v1/session/{{json_session.session_id}}/creature
Authorization: Bearer {{json_session.secret}}

?? status == 200

###
# @ref json_session
DELETE http://{{BASE_URL}}/api/v1/session/{{json_session.session_id}}
Authorization: Bearer {{json_session.secret}}

?? status == 200

###
# @ref json_session
GET http://{{BASE_URL}}/api/v1/session/{{json_session.session_id}}

?? status == 404

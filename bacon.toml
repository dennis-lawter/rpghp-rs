default_job = "run"
env.CARGO_TERM_COLOR = "always"

[jobs.kill]
command = ["pkill", "rpghp-rs"]
background = true

[jobs.run]
command = ["make", "local-debug"]
need_stdout = true
background = false
on_change_strategy = "kill_then_restart"
kill = ["pkill", "-TERM", "-P"]
watch = ["src", "assets", "handlebars", "migrations"]

[jobs.doc]
command = ["cargo", "doc", "--no-deps"]
need_stdout = false

# If the doc compiles, then it opens in your browser and bacon switches
# to the previous job
[jobs.doc-open]
command = ["cargo", "doc", "--no-deps", "--open"]
need_stdout = false
on_success = "back"                               # so that we don't open the browser at each change

# You may define here keybindings that would be specific to
# a project, for example a shortcut to launch a specific job.
# Shortcuts to internal functions (scrolling, toggling, etc.)
# should go in your personal global prefs.toml file instead.
[keybindings]
Enter = "job:run"
k = "job:kill"
